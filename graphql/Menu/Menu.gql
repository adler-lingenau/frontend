fragment menuItem on Page {
  id
  url: relativeUrl
  title
}

query Menu(
  $language: LanguageCodeFilterEnum
  $hotelPageId: ID!
  $environmentPageId: ID!
) {
  hotel: page(id: $hotelPageId, idType: DATABASE_ID) {
    ...menuItem
  }
  environment: page(id: $environmentPageId, idType: DATABASE_ID) {
    ...menuItem
  }
  hotelPageChildren: pages(
    where: { parent: $hotelPageId, orderby: { field: MENU_ORDER, order: ASC } }
  ) {
    edges {
      node {
        ...menuItem
      }
    }
  }
  environmentPageChildren: pages(
    where: {
      parent: $environmentPageId
      orderby: { field: MENU_ORDER, order: ASC }
    }
  ) {
    edges {
      node {
        ...menuItem
      }
    }
  }
  rooms(
    where: { language: $language, orderby: { field: MENU_ORDER, order: ASC } }
  ) {
    edges {
      node {
        id
        url: relativeUrl
        title
      }
    }
  }
  arrangements(
    where: { language: $language, orderby: { field: MENU_ORDER, order: ASC } }
  ) {
    edges {
      node {
        id
        url: relativeUrl
        title
      }
    }
  }
  menuItems(where: { location: HEADER, language: $language }) {
    edges {
      node {
        id
        title: label
        url: relativeUrl
        childItems {
          edges {
            node {
              title: label
              url: relativeUrl
            }
          }
        }
      }
    }
  }
}
